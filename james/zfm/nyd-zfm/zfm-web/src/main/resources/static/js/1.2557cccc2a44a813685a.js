webpackJsonp([1],{Bv40:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),o=s("BW2B"),l=s("3cXf"),n=s.n(l),r=s("gyMJ"),c=s("T452"),u={data:function(){return{flag:!1,dialogFormVisible:!1,title:"助乐管理系统",titlePas:"修改密码",formLabelWidth:"70px",userName:"",ruleForm:{pass:""},rules:{pass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:16,message:"只能输入为6~16位数字、字母",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{6,16}$/,message:"只能输入6~16位数字、字母",trigger:"blur"}]},data:null}},created:function(){this.data=JSON.parse(localStorage.getItem("user_data"))},mounted:function(){this.getUserInfo()},computed:{},methods:{getUserInfo:function(){var t=this;r.a.getUserInfo().then(function(e){e.data.success?(t.userName=e.data.data.loginName,localStorage.setItem("user_data",n()(e.data.data))):t.$notify.error({title:"提示",message:e.data.msg})})},toggleMenu:function(){this.flag=!this.flag,this.title=this.flag?"":"总控管理系统",this.$emit("toggleMenu",this.flag)},modifyPas:function(){this.dialogFormVisible=!0},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.updatePassWord()})},resetForm:function(t){this.dialogFormVisible=!1,this.$refs[t].resetFields()},logoutFn:function(){var t=this;this.$confirm("您将退出系统, 是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){t.logout()}).catch(function(){})},updatePassWord:function(){var t=this,e={loginName:this.data.loginName,password:this.ruleForm.pass};r.a.updatePassWord(e).then(function(e){t.ruleForm={pass:""},t.dialogFormVisible=!1,e.data.success?t.$confirm("修改密码成功！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"success"}).then(function(){}).catch(function(){}):t.$message({type:"success",message:e.data.msg})})},logout:function(){localStorage.removeItem("user_data"),localStorage.removeItem("menuList"),window.location.href=c.a+"/sys/logout"}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header_wrap clearfix"},[s("div",{staticClass:"header_con_left",class:{wid50:t.flag}},[t._v("\n    "+t._s(t.title)+"\n    "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"sys_icon"})]),t._v(" "),s("div",{staticClass:"header_con_rigth clearfix",class:{marginLeft:t.flag}},[s("div",{staticClass:"left"},[s("i",{staticClass:"header_arrow",class:{header_arrow_hide:t.flag},on:{click:t.toggleMenu}})]),t._v(" "),s("div",{staticClass:"right"},[s("ul",{staticClass:"clearfix"},[s("li",{staticClass:"left"},[t._v("欢迎\n          "),s("span",{staticClass:"nameClor"},[t._v(t._s(t.userName))])]),t._v(" "),s("li",{staticClass:"left",on:{click:t.modifyPas}},[s("i",{staticClass:"icon-com"}),t._v("修改密码\n        ")]),t._v(" "),s("li",{staticClass:"left",on:{click:t.logoutFn}},[s("i",{staticClass:"icon-com icon-logout"}),t._v("退出系统\n        ")])])])]),t._v(" "),s("el-dialog",{attrs:{title:t.titlePas,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":t.formLabelWidth}},[s("el-form-item",{attrs:{label:"账号"}},[s("span",{staticClass:"account"},[t._v(t._s(t.userName))])]),t._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[s("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入新密码"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("修 改")]),t._v(" "),s("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var m=s("C7Lr")(u,d,!1,function(t){s("aOQO")},"data-v-6ed08c4c",null).exports,f=s("2bvH"),g={data:function(){return{isCollapse:!1,width:"200",showHead:!1}},computed:i()({defaultActive:function(){return this.$route.path.replace("/","")}},Object(f.c)({muneList:function(t){return t.rolerMenuList}})),mounted:function(){},methods:i()({toggleMenu:function(t){this.isCollapse=t}},Object(f.b)({updateRolerMenuList:"UPDATE_ROLE_MENU_LIST"})),watch:{isCollapse:function(t){this.width=t?"0":"200"},$route:{handler:function(t){"/index"==this.$route.path?this.showHead=!1:this.showHead=!0},deep:!0}},components:{HeadTop:o.a,MainHeader:m}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"manage_page fillcontain"},[s("header",{staticClass:"main-header"},[s("MainHeader",{on:{toggleMenu:t.toggleMenu}})],1),t._v(" "),s("div",{staticClass:"ly_left",class:{wid50:t.isCollapse}},[s("div",{staticClass:"scroll_bar"},[s("el-menu",{staticStyle:{"min-height":"100%"},attrs:{"default-active":t.$route.path,"background-color":"#001529","text-color":"#fff","active-text-color":"#fff",collapse:t.isCollapse,"collapse-transition":!1,router:"","unique-opened":!0}},t._l(t.muneList,function(e){return s("div",{key:e.id},[null==e.childrenModule?s("el-menu-item",{attrs:{index:e.url||""}},[s("i",{staticClass:"icon_mune_com",class:e.iconUrl}),t._v("\n          "+t._s(e.name)+"\n        ")]):s("el-submenu",{attrs:{index:e.id+""}},[s("template",{slot:"title"},[s("i",{staticClass:"icon_mune_com",class:e.iconUrl}),t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),t._l(e.childrenModule,function(e){return s("el-menu-item",{key:e.id,attrs:{index:e.url}},[t._v(t._s(e.name))])})],2)],1)}),0)],1)]),t._v(" "),s("div",{staticClass:"ly_right",class:{marginLeft:t.isCollapse}},[s("div",[s("head-top")],1),t._v(" "),s("div",{staticClass:"ly_router_wrap",staticStyle:{"margin-bottom":"20px"}},[s("router-view")],1)])])},staticRenderFns:[]};var p=s("C7Lr")(g,h,!1,function(t){s("Qpwe")},"data-v-158aaa4c",null);e.default=p.exports},Qpwe:function(t,e){},aOQO:function(t,e){}});