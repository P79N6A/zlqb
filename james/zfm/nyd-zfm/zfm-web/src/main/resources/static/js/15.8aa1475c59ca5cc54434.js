webpackJsonp([15],{udPv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aA9S"),o=a.n(i),l=a("gyMJ"),n={name:"SYP_Dictionary",data:function(){return{loadingDetail:!1,buttonLoading:!1,title:"数据字典",tableData3:[],currentPage:1,total:0,pageNo:1,pageSize:10,pageSize_s:10,currentPage_s:1,total_s:0,pageNo2:1,pageSize2:10,dialogFormVisible:!1,innerVisible:!1,form:{name:"",price:"",code:""},form_rules:{name:[{required:!0,message:"请输入大类名称",trigger:"change"}],price:[{required:!0,message:"请输入大类值",trigger:"change"}],code:[{required:!0,message:"请输入编码",trigger:"change"}]},saveLoading:!1,formLabelWidth:"100px",detailData:[],detailDialogFormVisible:!1,detailForm:{name2:"",price2:"",detailCode:"",status:1,index:""},detailForm_rules:{name2:[{required:!0,message:"请输入小类名称",trigger:"change"}],price2:[{required:!0,message:"请输入小类值",trigger:"change"}],detailCode:[{required:!0,message:"请输入编码",trigger:"change"}],index:[{required:!0,message:"请输入排序",trigger:"change"}]},detInnerVisible:!1,saveDetLoading:!1,bigClassTitle:"",detailTit:"保存",detailTitle:"",orShowDetail:!1,maxid:"",minid:"",dictionaryId:"",code:"",resCode:"",glg_id:"",glg_code:"",flagCode:!1,flagDetailCode:!1,loadingTable:!1,loadingTable1:!1,search:""}},created:function(){},methods:{checkSpace:function(){},searchDet:function(){this.pageNo=1,this.queryPageDictionary()},addbigClass:function(){this.dialogFormVisible=!0,this.bigClassTitle="新增大类",this.maxid="",this.flagCode=!1},modifyData:function(t){this.bigClassTitle="修改大类",this.form=o()(this.form,t.row),this.maxid=t.row.id,this.flagCode=!0,this.dialogFormVisible=!0},addDiaClose:function(){var t=this;o()(this.form,{name:"",price:"",code:""}),this.$nextTick(function(){t.$refs.form.clearValidate()})},addDiaClose2:function(){var t=this;o()(this.detailForm,{name2:"",price2:"",detailCode:"",index:""}),this.$nextTick(function(){t.$refs.detailForm.clearValidate()})},statusReplace:function(t){if(t)for(var e in t)1==t[e].status?t[e].statusName="可用":0==t[e].status&&(t[e].statusName="停用");return t},queryPageDictionary:function(){var t=this;this.loadingTable1=!0,l.a.queryPageDictionary({pageNo:this.pageNo,pageSize:this.pageSize,name:this.search}).then(function(e){t.loadingTable1=!1,t.tableData3=e.data.data,t.tableData3=t.statusReplace(t.tableData3),t.total=e.data.total})},handleSizeChange:function(t){this.currentPage=1,this.pageNo=1,this.pageSize=t,this.queryPageDictionary()},handleCurrentChange:function(t){this.pageNo=t,this.currentPage=t,this.queryPageDictionary()},updateDictionary:function(){var t=this;this.$refs.form.validate(function(e){if(e){t.buttonLoading=!0;var a={id:t.maxid,name:t.form.name,code:t.form.code};t.flagCode&&delete a.code,l.a.updateDictionary(a).then(function(e){1==e.data.code?(t.$message.success(e.data.msg),t.dialogFormVisible=!1,t.queryPageDictionary()):t.$notify({title:"提示",message:e.data.msg,duration:1500})}),t.buttonLoading=!1}})},updateDictionaryDetail:function(){var t=this;this.buttonLoading=!0;var e={id:this.minid,dictionaryId:this.dictionaryId,name:this.detailForm.name2,code:this.code,detailCode:this.detailForm.detailCode,price:this.detailForm.price2,status:this.detailForm.status,reorder:this.detailForm.index};this.flagDetailCode&&delete e.detailCode,this.loadingDetail=!0,l.a.updateDictionaryDetail(e).then(function(e){t.loadingDetail=!1,1==e.data.code?(t.$message.success(e.data.msg),t.detailDialogFormVisible=!1,l.a.queryPageDictionaryDetail({pageNo:t.pageNo2,pageSize:t.pageSize2,dictionaryId:t.dictionaryId,code:t.code}).then(function(e){1==e.data.code&&(t.detailData=e.data.data,t.detailData=t.statusReplace(t.detailData),t.queryPageDictionaryDetailFn())})):t.$notify({title:"提示",message:e.data.msg,duration:1500})})},updateModifyDetail:function(t){var e=this;this.$refs.detailForm.validate(function(t){t&&e.updateDictionaryDetail()})},closeInnerVisible:function(){this.innerVisible=!1,this.saveLoading=!0},addDetail:function(t){var e=this;this.currentPage_s=1,this.pageNo2=1,this.orShowDetail=!0,this.glg_id=t.row.id,this.code=t.row.code,this.resCode=t.row.code,this.loadingTable=!0,l.a.queryPageDictionaryDetail({pageNo:this.pageNo2,pageSize:this.pageSize2,dictionaryId:t.row.id,code:t.row.code}).then(function(a){e.loadingTable=!1,e.total_s=a.data.total,e.detailData=a.data.data,e.detailData=e.statusReplace(e.detailData),e.dictionaryId=t.row.id,e.code=t.row.code})},queryPageDictionaryDetailFn:function(t){var e=this;l.a.queryPageDictionaryDetail({pageNo:this.pageNo2,pageSize:this.pageSize2,dictionaryId:this.glg_id,code:this.code}).then(function(t){e.total_s=t.data.total,e.detailData=t.data.data,e.detailData=e.statusReplace(e.detailData)})},handleSizeChange_s:function(t){this.currentPage_s=1,this.pageNo2=1,this.pageSize2=t,this.queryPageDictionaryDetailFn()},handleCurrentChange_s:function(t){this.pageNo2=t,this.currentPage_s=t,this.queryPageDictionaryDetailFn()},showDetail:function(){this.detailTit="保存",this.detailTitle="新增明细",this.detailDialogFormVisible=!0,this.minid="",this.flagDetailCode=!1,this.detailForm.status=1,this.code=this.resCode},closeDetDialogFormVisible:function(){this.detInnerVisible=!0},closeDetInnerVisible:function(){this.detInnerVisible=!1,this.saveDetLoading=!1,this.detailDialogFormVisible=!1},detailClose:function(t,e){var a=this;this.minid=t.row.id,this.dictionaryId=t.row.dictionaryId,this.code=null,this.$confirm("确认停用?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(function(){a.detailForm.status=0,a.updateDictionaryDetail()})},detailOpen:function(t,e){var a=this;this.minid=t.row.id,this.dictionaryId=t.row.dictionaryId,this.code=null,this.$confirm("确认启用?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(function(){a.detailForm.status=1,a.updateDictionaryDetail()})},modifyDetData:function(t,e){this.flagDetailCode=!0,this.detailForm={detailCode:t.row.detailCode,dictionaryId:t.row.dictionaryId,code:null,id:t.row.id,name2:t.row.name,price2:t.row.price,status:t.row.status,index:t.row.reorder},this.minid=t.row.id,this.dictionaryId=t.row.dictionaryId,this.code=null,this.detailForm.status="停用"==e?0:1,this.detailDialogFormVisible=!0,this.detailTit="修改",this.detailTitle="修改明细"}},components:{Pagination:a("cMGX").a},mounted:function(){this.queryPageDictionary()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dictionary-wrap"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"dictionary-con ft"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"ft",staticStyle:{width:"60%"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入大类名称",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchDet},slot:"append"})],1)],1),t._v(" "),a("el-button",{staticClass:"rt",attrs:{type:"primary"},on:{click:function(e){return t.addbigClass()}}},[t._v("新增大类")])],1),t._v(" "),a("div",{staticClass:"tables resetTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable1,expression:"loadingTable1"}],staticStyle:{width:"100%"},attrs:{data:t.tableData3,border:""}},[a("el-table-column",{attrs:{width:"70px","show-overflow-tooltip":!0,align:"center",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center","show-overflow-tooltip":!0,label:"大类名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.addDetail(e)}}},[t._v("\n\t\t\t\t\t          \t"+t._s(e.row.name)+"\n\t\t\t\t\t        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"code",label:"大类编码"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.modifyData(e)}}},[t._v("\n\t\t\t\t          \t修改\n\t\t\t\t        ")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"com_pad20 alignCen"},[a("pagination",{attrs:{currentPage:t.currentPage,total:t.total,myPageSizes:t.pageSize},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1),t._v(" "),a("div",[a("el-dialog",{staticClass:"dialog-wrap",attrs:{"close-on-click-modal":!1,title:t.bigClassTitle,visible:t.dialogFormVisible,width:"400px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.addDiaClose}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.form_rules}},[a("el-form-item",{attrs:{label:"大类名称：","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"大类编码：","label-width":t.formLabelWidth,prop:"code"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:t.flagCode,maxlength:20},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code","string"==typeof e?e.trim():e)},expression:"form.code"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.buttonLoading},on:{click:function(e){return t.updateDictionary()}}},[t._v("确 定")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"addDetail ft"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.orShowDetail,expression:"orShowDetail"}],staticClass:"detail-wrap resetTable"},[a("div",{staticClass:"m20 rt",staticStyle:{"padding-bottom":"15px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showDetail}},[t._v("新增明细")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:t.detailData,border:""}},[a("el-table-column",{attrs:{width:"70px","show-overflow-tooltip":!0,align:"center",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center","show-overflow-tooltip":!0,label:"明细名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,prop:"price",label:"明细值"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"detailCode",label:"明细编码"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"statusName",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"reorder",label:"排序"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.modifyDetData(e)}}},[t._v("\n\t\t\t\t          \t修改\n\t\t\t\t        ")]):t._e(),t._v(" "),1==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.detailClose(e,"停用")}}},[t._v("\n\t\t\t\t          \t停用\n\t\t\t\t        ")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.detailOpen(e,"启用")}}},[t._v("\n\t\t\t\t          \t启用\n\t\t\t\t        ")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"com_pad20 alignCen"},[a("pagination",{attrs:{currentPage:t.currentPage_s,total:t.total_s,myPageSizes:t.pageSize2},on:{handleSizeChange:t.handleSizeChange_s,handleCurrentChange:t.handleCurrentChange_s}})],1),t._v(" "),a("div",[a("el-dialog",{staticClass:"dialog-wrap",attrs:{"close-on-click-modal":!1,title:t.detailTitle,visible:t.detailDialogFormVisible,width:"400px"},on:{"update:visible":function(e){t.detailDialogFormVisible=e},close:t.addDiaClose2}},[a("el-form",{ref:"detailForm",attrs:{model:t.detailForm,rules:t.detailForm_rules}},[a("el-form-item",{attrs:{label:"明细名称：","label-width":t.formLabelWidth,prop:"name2"}},[a("el-input",{attrs:{maxlength:50},model:{value:t.detailForm.name2,callback:function(e){t.$set(t.detailForm,"name2","string"==typeof e?e.trim():e)},expression:"detailForm.name2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"明细值：","label-width":t.formLabelWidth,prop:"price2"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.detailForm.price2,callback:function(e){t.$set(t.detailForm,"price2","string"==typeof e?e.trim():e)},expression:"detailForm.price2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"明细编码：","label-width":t.formLabelWidth,prop:"detailCode"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:t.flagDetailCode,maxlength:20},model:{value:t.detailForm.detailCode,callback:function(e){t.$set(t.detailForm,"detailCode","string"==typeof e?e.trim():e)},expression:"detailForm.detailCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序：","label-width":t.formLabelWidth,prop:"index"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{"auto-complete":"off",maxlength:20},model:{value:t.detailForm.index,callback:function(e){t.$set(t.detailForm,"index","string"==typeof e?e.trim():e)},expression:"detailForm.index"}}),t._v("数字越小排序越前\n\t\t\t\t\t\t    ")],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.detailDialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loadingDetail},on:{click:function(e){return t.updateModifyDetail(t.detailForm)}}},[t._v("确 定")])],1)],1)],1)],1)])])])},staticRenderFns:[]};var s=a("C7Lr")(n,r,!1,function(t){a("wjyJ")},null,null);e.default=s.exports},wjyJ:function(t,e){}});